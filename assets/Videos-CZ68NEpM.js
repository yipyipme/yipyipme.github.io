import{j as e,K as j,B as d,q as f,F as D,E as V,$ as F,x as U,m as k,i as B,r as c,w as b}from"./index-Ct_SM0vh.js";import{U as N,a as y,S as E}from"./CreatorStudioLayout-75gV8LXd.js";import{C as z,d as L}from"./card-INzX4pkU.js";import{S as P}from"./square-pen-DdXM5FLM.js";import{T as _}from"./trash-2-B98avO4n.js";import"./alert-CtKX3wDI.js";import"./textarea-CBKetNLb.js";import"./circle-alert-CsA9kWpQ.js";import"./radio-C0_lv_wC.js";import"./message-square-82MjDiG_.js";import"./book-open-DSlMyBw5.js";const $=({video:s,onDelete:o})=>{const r=t=>{switch(t){case"published":return"bg-green-500";case"draft":return"bg-yellow-500";case"processing":return"bg-blue-500";case"review":return"bg-purple-500";default:return"bg-gray-500"}},l=t=>{if(!t)return"Unknown";const h=Math.floor(t/60),n=t%60;return`${h}:${n.toString().padStart(2,"0")}`},i=t=>t?`${(t/(1024*1024)).toFixed(1)} MB`:"Unknown",u=t=>new Date(t).toLocaleDateString(),m=()=>{confirm("Are you sure you want to delete this video?")&&o(s.id)};return e.jsxs(z,{className:"bg-gray-900 border-gray-800 overflow-hidden group hover:border-[#FDBD34]/30 transition-colors",children:[e.jsxs("div",{className:"relative",children:[s.thumbnail_url?e.jsx("img",{src:s.thumbnail_url,alt:s.title,className:"w-full h-48 object-cover"}):e.jsx("div",{className:"w-full h-48 bg-gray-800 flex items-center justify-center",children:e.jsx(j,{className:"h-12 w-12 text-gray-400"})}),e.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsxs(d,{size:"sm",className:"bg-[#FDBD34] text-black",children:[e.jsx(j,{className:"h-4 w-4 mr-2"}),"Preview"]})}),e.jsx(f,{className:`absolute top-2 left-2 ${r(s.status)} text-white`,children:s.status}),s.duration&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 text-white text-xs px-2 py-1 rounded",children:l(s.duration)})]}),e.jsxs(L,{className:"p-4",children:[e.jsx("h3",{className:"text-white font-semibold mb-2 line-clamp-2",children:s.title}),e.jsxs("div",{className:"space-y-2 mb-3",children:[s.category&&e.jsx(f,{variant:"outline",className:"text-xs border-gray-600 text-gray-300",children:s.category}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(D,{className:"h-3 w-3"}),u(s.created_at)]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(V,{className:"h-3 w-3"}),i(s.file_size)]})]}),s.processing_status==="processing"&&e.jsxs("div",{className:"text-xs text-blue-400",children:["Processing: ",s.processing_progress,"%"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{size:"sm",variant:"outline",className:"flex-1 border-gray-700 text-gray-300 hover:text-[#FDBD34]",children:[e.jsx(P,{className:"h-3 w-3 mr-1"}),"Edit"]}),e.jsx(d,{size:"sm",variant:"outline",className:"border-red-700 text-red-400 hover:bg-red-500/10",onClick:m,children:e.jsx(_,{className:"h-3 w-3"})}),e.jsx(d,{size:"sm",variant:"outline",className:"border-gray-700 text-gray-300",children:e.jsx(F,{className:"h-3 w-3"})})]})]})]})},A=({searchQuery:s,statusFilter:o,onSearchChange:r,onStatusChange:l})=>e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),e.jsx(k,{placeholder:"Search videos...",value:s,onChange:i=>r(i.target.value),className:"pl-10 bg-gray-800 border-gray-700 text-white"})]}),e.jsxs("select",{value:o,onChange:i=>l(i.target.value),className:"bg-gray-800 border-gray-700 text-white rounded-md px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"draft",children:"Draft"}),e.jsx("option",{value:"processing",children:"Processing"}),e.jsx("option",{value:"review",children:"Review"}),e.jsx("option",{value:"published",children:"Published"})]})]}),M=({searchQuery:s,statusFilter:o,onUpload:r})=>{const l=s||o!=="all";return e.jsxs("div",{className:"text-center py-12",children:[e.jsx(N,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-300 mb-2",children:"No videos found"}),e.jsx("p",{className:"text-gray-500 mb-4",children:l?"Try adjusting your search or filters":"Upload your first video to get started"}),!l&&e.jsx(d,{onClick:r,className:"bg-[#FDBD34] text-black",children:"Upload Video"})]})},X=()=>{const{user:s}=B(),[o,r]=c.useState(!1),[l,i]=c.useState([]),[u,m]=c.useState(!0),[t,h]=c.useState(""),[n,v]=c.useState("all"),g=async()=>{if(s)try{m(!0);const a=await b.getCreatorVideos(s.id);i(a)}catch(a){console.error("Error loading videos:",a)}finally{m(!1)}};c.useEffect(()=>{g()},[s]);const w=()=>{g(),r(!1)},S=async a=>{try{await b.deleteVideo(a),i(l.filter(x=>x.id!==a))}catch(x){console.error("Error deleting video:",x)}},p=l.filter(a=>{const x=a.title.toLowerCase().includes(t.toLowerCase()),C=n==="all"||a.status===n;return x&&C});return u?e.jsx(y,{children:e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx("div",{className:"text-white",children:"Loading videos..."})})}):e.jsxs(y,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:"Videos"}),e.jsx("p",{className:"text-gray-400 mt-2",children:"Manage your video content"})]}),e.jsxs(d,{onClick:()=>r(!0),className:"bg-[#FDBD34] text-black hover:bg-[#FDBD34]/80",children:[e.jsx(N,{className:"h-4 w-4 mr-2"}),"Upload Video"]})]}),e.jsx(A,{searchQuery:t,statusFilter:n,onSearchChange:h,onStatusChange:v}),p.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:p.map(a=>e.jsx($,{video:a,onDelete:S},a.id))}):e.jsx(M,{searchQuery:t,statusFilter:n,onUpload:()=>r(!0)})]}),o&&e.jsx(E,{onClose:()=>r(!1),onSuccess:w})]})};export{X as default};
